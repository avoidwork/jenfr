{"version":3,"sources":["jenfr.js"],"names":["global","deferred","promise","resolver","rejecter","Promise","resolve","reject","jenfr","target","uri","arguments","length","undefined","options","height","width","defer","canvas","ctx","frag","img","Element","TypeError","Object","document","createElement","setAttribute","forEach","i","isNaN","createDocumentFragment","appendChild","keys","attribute","test","getContext","fillStyle","fillRect","drawImage","window","requestAnimationFrame","version","exports","module","define","amd"],"mappings":";;AASA,cAEA,SAAWA,GAGV,QAASC,KACR,GAAIC,GAAU,OACVC,EAAW,OACXC,EAAW,MAOf,OALAF,GAAU,GAAIG,SAAQ,SAAUC,EAASC,GACxCJ,EAAWG,EACXF,EAAWG,KAGHD,QAASH,EAAUI,OAAQH,EAAUF,QAASA,GAGxD,QAASM,GAAMC,GACd,GAAIC,GAAMC,UAAUC,QAAU,GAAsBC,SAAjBF,UAAU,GAAmB,GAAKA,UAAU,GAC3EG,EAAUH,UAAUC,QAAU,GAAsBC,SAAjBF,UAAU,IAAqBI,OAAQ,IAAKC,MAAO,KAAQL,UAAU,GAExGM,EAAQhB,IACRiB,EAAS,OACTC,EAAM,OACNC,EAAO,OACPC,EAAM,MAsDV,QApDKZ,YAAkBa,UACtBL,EAAMV,OAAO,GAAIgB,WAAU,sBAGvBT,YAAmBU,SACvBP,EAAMV,OAAO,GAAIgB,WAAU,oBAGxBb,IACHW,EAAMI,SAASC,cAAc,OAC7BL,EAAIM,aAAa,MAAOjB,IAEvB,SAAU,SAASkB,QAAQ,SAAUC,GACjCC,MAAMhB,EAAQe,KACjBR,EAAIM,aAAaE,EAAGR,EAAIQ,IACxBf,EAAQe,GAAKR,EAAIQ,IAEjBR,EAAIM,aAAaE,EAAGf,EAAQe,OAK/BT,EAAOK,SAASM,yBAChBb,EAASO,SAASC,cAAc,UAChCN,EAAKY,YAAYd,GAEjBM,OAAOS,KAAKnB,GAASc,QAAQ,SAAUC,GAClCK,EAAUC,KAAKN,IAClBX,EAAOS,aAAaE,EAAGf,EAAQe,MAI7BX,EAAOkB,YACVjB,EAAMD,EAAOkB,WAAW,MAEpBtB,EAAQuB,YACXlB,EAAIkB,UAAYvB,EAAQuB,UACxBlB,EAAImB,SAAS,EAAG,EAAGpB,EAAOF,MAAOE,EAAOH,SAGrCM,GACHF,EAAIoB,UAAUlB,EAAK,EAAG,EAAGP,EAAQE,MAAOF,EAAQC,SAEvCM,GACVH,EAAOc,YAAYX,GAGpBmB,OAAOC,sBAAsB,WAC5BhC,EAAOuB,YAAYZ,GACnBH,EAAMX,SAASY,EAAQC,EAAKE,MAGtBJ,EAAMf,QA7Ed,GAAIgC,GAAY,kJAgFhB1B,GAAMkC,QAAU,QAGO,mBAAZC,SACVC,OAAOD,QAAUnC,EACW,kBAAXqC,SAAyBA,OAAOC,IACjDD,OAAO,WACN,MAAOrC,KAGRR,EAAOQ,MAAQA,GAEI,mBAAXgC,QAAyBA,OAASxC","file":"jenfr.min.js","sourcesContent":["/**\r\n * Canvas based image loader\r\n *\r\n * @author Jason Mulligan <jason.mulligan@avoidwork.com>\r\n * @copyright 2016\r\n * @license BSD-3-Clause\r\n * @link http://avoidwork.github.io/jenfr\r\n * @version 1.0.0\r\n */\n\"use strict\";\n\n(function (global) {\n\tvar attribute = /^(className|draggable|height|hidden|id|offsetHeight|offsetWidth|offsetLeft|offsetTop|scrollHeight|scrollLeft|scrollTop|scrollWidth|title|width)$/;\n\n\tfunction deferred() {\n\t\tvar promise = void 0,\n\t\t    resolver = void 0,\n\t\t    rejecter = void 0;\n\n\t\tpromise = new Promise(function (resolve, reject) {\n\t\t\tresolver = resolve;\n\t\t\trejecter = reject;\n\t\t});\n\n\t\treturn { resolve: resolver, reject: rejecter, promise: promise };\n\t}\n\n\tfunction jenfr(target) {\n\t\tvar uri = arguments.length <= 1 || arguments[1] === undefined ? \"\" : arguments[1];\n\t\tvar options = arguments.length <= 2 || arguments[2] === undefined ? { height: 100, width: 100 } : arguments[2];\n\n\t\tvar defer = deferred(),\n\t\t    canvas = void 0,\n\t\t    ctx = void 0,\n\t\t    frag = void 0,\n\t\t    img = void 0;\n\n\t\tif (!target instanceof Element) {\n\t\t\tdefer.reject(new TypeError(\"Element required\"));\n\t\t}\n\n\t\tif (!options instanceof Object) {\n\t\t\tdefer.reject(new TypeError(\"Object required\"));\n\t\t}\n\n\t\tif (uri) {\n\t\t\timg = document.createElement(\"img\");\n\t\t\timg.setAttribute(\"src\", uri);\n\n\t\t\t[\"height\", \"width\"].forEach(function (i) {\n\t\t\t\tif (isNaN(options[i])) {\n\t\t\t\t\timg.setAttribute(i, img[i]);\n\t\t\t\t\toptions[i] = img[i];\n\t\t\t\t} else {\n\t\t\t\t\timg.setAttribute(i, options[i]);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfrag = document.createDocumentFragment();\n\t\tcanvas = document.createElement(\"canvas\");\n\t\tfrag.appendChild(canvas);\n\n\t\tObject.keys(options).forEach(function (i) {\n\t\t\tif (attribute.test(i)) {\n\t\t\t\tcanvas.setAttribute(i, options[i]);\n\t\t\t}\n\t\t});\n\n\t\tif (canvas.getContext) {\n\t\t\tctx = canvas.getContext(\"2d\");\n\n\t\t\tif (options.fillStyle) {\n\t\t\t\tctx.fillStyle = options.fillStyle;\n\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\n\t\t\t}\n\n\t\t\tif (img) {\n\t\t\t\tctx.drawImage(img, 0, 0, options.width, options.height);\n\t\t\t}\n\t\t} else if (img) {\n\t\t\tcanvas.appendChild(img);\n\t\t}\n\n\t\twindow.requestAnimationFrame(function () {\n\t\t\ttarget.appendChild(frag);\n\t\t\tdefer.resolve([canvas, ctx, img]);\n\t\t});\n\n\t\treturn defer.promise;\n\t}\n\n\tjenfr.version = \"1.0.0\";\n\n\t// Node, AMD & window supported\n\tif (typeof exports !== \"undefined\") {\n\t\tmodule.exports = jenfr;\n\t} else if (typeof define === \"function\" && define.amd) {\n\t\tdefine(function () {\n\t\t\treturn jenfr;\n\t\t});\n\t} else {\n\t\tglobal.jenfr = jenfr;\n\t}\n})(typeof window !== \"undefined\" ? window : global);\n"]}